<?xml version="1.0" encoding="utf-8"?><!DOCTYPE nta PUBLIC '-//Uppaal Team//DTD Flat System 1.1//EN' 'http://www.it.uu.se/research/group/darts/uppaal/flat-1_1.dtd'><nta><declaration>// Place global declarations here.
chan from, to, process_, inOnly, inOut, split, agregate, transform,
		migrate, dynamic;
		chan endRoute, route,migrationTemplate, endTemplate;
				
const int MAX_EIP = 10;
		typedef int[0,MAX_EIP] eip_t;

		const eip_t MIGRATE = 0;
		const eip_t TO = 1;
		const eip_t FROM = 2;
		const eip_t AGREGATE = 3;
		const eip_t DYNAMIC = 4;
		const eip_t INOUT = 5;
		const eip_t INONLY = 6;
		const eip_t TRANSFORM = 7;
		const eip_t PROCESS = 8;
		const eip_t SPLIT = 9;



		const int MAX_ORCH = 4;
		typedef int[0,MAX_ORCH] orch_t;

		typedef struct {
		eip_t type;
		orch_t id;
		} EIP;</declaration><template><name x="5" y="5">Routes</name><declaration>// Place local declarations here.
		</declaration><location id="id0" x="-80" y="-40"><name x="-104" y="-32">PurgeRoute</name></location><location id="id1" x="-24" y="-96"><name x="-34" y="-126">BuildingRoute</name></location><location id="id2" x="-144" y="-96"><name x="-154" y="-126">Idle</name></location><init ref="id2"/><transition><source ref="id0"/><target ref="id2"/><label kind="synchronisation" x="-152" y="-72">route?</label></transition><transition><source ref="id1"/><target ref="id0"/><label kind="synchronisation" x="-40" y="-80">endRoute?</label></transition><transition><source ref="id2"/><target ref="id1"/><label kind="synchronisation" x="-104" y="-160">from!</label><nail x="-88" y="-144"/></transition></template><template><name>Route</name><location id="id3" x="-112" y="104"><name x="-168" y="112">TemplateApplication</name><urgent/></location><location id="id4" x="-88" y="-16"><name x="-136" y="-24">build</name></location><location id="id5" x="-200" y="-16"><name x="-184" y="-24">Idle</name></location><init ref="id5"/><transition><source ref="id4"/><target ref="id4"/><label kind="synchronisation" x="-176" y="-104">to!</label><nail x="-168" y="-72"/><nail x="-136" y="-96"/></transition><transition><source ref="id4"/><target ref="id5"/><label kind="synchronisation" x="-256" y="16">endRoute!</label><nail x="-184" y="40"/></transition><transition><source ref="id5"/><target ref="id5"/><label kind="synchronisation" x="-328" y="-32">endRoute!</label><nail x="-256" y="16"/><nail x="-256" y="-40"/></transition><transition><source ref="id5"/><target ref="id4"/><label kind="synchronisation" x="-224" y="-72">route!</label><nail x="-184" y="-64"/></transition><transition><source ref="id3"/><target ref="id4"/><label kind="synchronisation" x="-256" y="72">migrationTemplate?</label><nail x="-144" y="56"/></transition><transition><source ref="id4"/><target ref="id3"/><label kind="synchronisation" x="-80" y="80">migrate!</label><nail x="-64" y="72"/></transition><transition><source ref="id4"/><target ref="id4"/><label kind="synchronisation" x="-40" y="56">agregate!</label><nail x="-24" y="56"/><nail x="-56" y="72"/></transition><transition><source ref="id4"/><target ref="id4"/><label kind="synchronisation" x="-152" y="-128">process_!</label><nail x="-128" y="-104"/><nail x="-96" y="-112"/></transition><transition><source ref="id4"/><target ref="id4"/><label kind="synchronisation" x="0" y="24">inOnly!</label><nail x="8" y="16"/><nail x="-16" y="48"/></transition><transition><source ref="id4"/><target ref="id4"/><label kind="synchronisation" x="16" y="-24">inOut!</label><nail x="8" y="-24"/><nail x="8" y="8"/></transition><transition><source ref="id4"/><target ref="id4"/><label kind="synchronisation" x="0" y="-64">dynamic!</label><nail x="-8" y="-64"/><nail x="8" y="-32"/></transition><transition><source ref="id4"/><target ref="id4"/><label kind="synchronisation" x="-40" y="-112">split!</label><nail x="-48" y="-96"/><nail x="-16" y="-72"/></transition><transition><source ref="id4"/><target ref="id4"/><label kind="synchronisation" x="-88" y="-136">transform!</label><nail x="-88" y="-112"/><nail x="-56" y="-104"/></transition></template><template><name>AgentDef</name><parameter>eip_t p1, eip_t p2, eip_t p3</parameter><declaration>//, eip_t p4, eip_t p5, eip_t p6  
orch_t i = 0;
eip_t orch[MAX_ORCH];
void init_(){
orch[0] = FROM;
orch[1] = p1;
orch[2] = p2;
orch[3] = p3;
//orch[3] = p4;
//orch[4] = p5;
//orch[5] = p6;
}</declaration><location id="id6" x="-46" y="238"><name x="-112" y="224">EndDef</name></location><location id="id7" x="192" y="-96"><name x="182" y="-126">Inonly</name></location><location id="id8" x="192" y="-32"><name x="182" y="-62">Dynamic</name></location><location id="id9" x="192" y="-240"><name x="182" y="-270">From</name></location><location id="id10" x="192" y="-200"><name x="182" y="-230">To</name></location><location id="id11" x="192" y="88"><name x="182" y="58">Migrate</name></location><location id="id12" x="192" y="48"><name x="182" y="18">Split</name></location><location id="id13" x="192" y="8"><name x="182" y="-22">Agregate</name></location><location id="id14" x="192" y="-64"><name x="182" y="-94">Inout</name></location><location id="id15" x="192" y="-128"><name x="182" y="-158">Transform</name></location><location id="id16" x="192" y="-160"><name x="182" y="-190">Process</name></location><location id="id17" x="-184" y="136"><name x="-194" y="106">Idle</name></location><location id="id18" x="88" y="136"><name x="78" y="106">EndStep</name></location><location id="id19" x="-48" y="136"><name x="-58" y="106">Wait</name></location><init ref="id17"/><transition><source ref="id18"/><target ref="id19"/><label kind="guard" x="-32" y="144">i&lt;MAX_ORCH-1</label><label kind="assignment" x="-32" y="160">i = i+1</label></transition><transition><source ref="id18"/><target ref="id6"/><label kind="guard" x="16" y="200">i==MAX_ORCH-1</label><label kind="synchronisation" x="16" y="216">endRoute?</label></transition><transition><source ref="id11"/><target ref="id18"/><nail x="392" y="88"/><nail x="392" y="136"/></transition><transition><source ref="id12"/><target ref="id18"/><nail x="392" y="48"/><nail x="392" y="136"/></transition><transition><source ref="id13"/><target ref="id18"/><nail x="392" y="8"/><nail x="392" y="136"/></transition><transition><source ref="id8"/><target ref="id18"/><nail x="392" y="-32"/><nail x="392" y="136"/></transition><transition><source ref="id14"/><target ref="id18"/><nail x="392" y="-64"/><nail x="392" y="136"/></transition><transition><source ref="id7"/><target ref="id18"/><nail x="392" y="-96"/><nail x="392" y="136"/></transition><transition><source ref="id15"/><target ref="id18"/><nail x="392" y="-128"/><nail x="392" y="136"/></transition><transition><source ref="id16"/><target ref="id18"/><nail x="392" y="-160"/><nail x="392" y="136"/></transition><transition><source ref="id10"/><target ref="id18"/><nail x="392" y="-200"/><nail x="392" y="136"/></transition><transition><source ref="id9"/><target ref="id18"/><nail x="392" y="-240"/><nail x="392" y="136"/></transition><transition><source ref="id19"/><target ref="id9"/><label kind="guard" x="-40" y="-272">orch[i]==FROM</label><label kind="synchronisation" x="-40" y="-257">from?</label><nail x="-48" y="-240"/><nail x="88" y="-240"/></transition><transition><source ref="id17"/><target ref="id19"/><label kind="assignment" x="-136" y="112">init_()</label></transition><transition><source ref="id19"/><target ref="id10"/><label kind="guard" x="-40" y="-231">orch[i]==TO</label><label kind="synchronisation" x="-40" y="-216">to?</label><nail x="-48" y="-200"/><nail x="88" y="-200"/></transition><transition><source ref="id19"/><target ref="id16"/><label kind="guard" x="-40" y="-199">orch[i]==PROCESS</label><label kind="synchronisation" x="-40" y="-184">process_?</label><nail x="-48" y="-160"/><nail x="88" y="-160"/></transition><transition><source ref="id19"/><target ref="id7"/><label kind="guard" x="-32" y="-128">orch[i]==INONLY</label><label kind="synchronisation" x="-32" y="-113">inOnly?</label><nail x="-48" y="-96"/><nail x="88" y="-96"/></transition><transition><source ref="id19"/><target ref="id14"/><label kind="guard" x="-32" y="-96">orch[i]==INOUT</label><label kind="synchronisation" x="-32" y="-80">inOut?</label><nail x="-48" y="-64"/><nail x="88" y="-64"/></transition><transition><source ref="id19"/><target ref="id8"/><label kind="guard" x="-40" y="-64">orch[i]==DYNAMIC</label><label kind="synchronisation" x="-40" y="-49">dynamic?</label><nail x="-48" y="-32"/><nail x="88" y="-32"/></transition><transition><source ref="id19"/><target ref="id13"/><label kind="guard" x="-40" y="-33">orch[i]==AGREGATE</label><label kind="synchronisation" x="-40" y="-16">agregate?</label><nail x="-48" y="8"/><nail x="88" y="8"/></transition><transition><source ref="id19"/><target ref="id15"/><label kind="guard" x="-40" y="-160">orch[i]==TRANSFORM</label><label kind="synchronisation" x="-40" y="-145">transform?</label><nail x="-48" y="-128"/><nail x="88" y="-128"/></transition><transition><source ref="id19"/><target ref="id12"/><label kind="guard" x="-32" y="9">orch[i]==SPLIT</label><label kind="synchronisation" x="-32" y="24">split?</label><nail x="-48" y="48"/><nail x="88" y="48"/></transition><transition><source ref="id19"/><target ref="id11"/><label kind="guard" x="-32" y="48">orch[i]==MIGRATE</label><label kind="synchronisation" x="-32" y="64">migrate?</label><nail x="-48" y="86"/><nail x="88" y="86"/></transition></template><template><name>MigrationTemplate</name><location id="id20" x="-152" y="-144"><name x="-176" y="-176">Step1</name><committed/></location><location id="id21" x="-144" y="-16"><name x="-154" y="-46">Step6</name><committed/></location><location id="id22" x="16" y="-16"><name x="-8" y="-48">Step5</name><committed/></location><location id="id23" x="64" y="-80"><name x="54" y="-110">Step4</name><committed/></location><location id="id24" x="16" y="-144"><name x="6" y="-174">Step3</name><committed/></location><location id="id25" x="-72" y="-144"><name x="-82" y="-174">Step2</name><committed/></location><location id="id26" x="-208" y="-80"><name x="-248" y="-96">Idle</name></location><init ref="id26"/><transition><source ref="id26"/><target ref="id20"/><label kind="synchronisation" x="-304" y="-128">migrationTemplate!</label></transition><transition><source ref="id21"/><target ref="id26"/><label kind="synchronisation" x="-200" y="-48">to?</label></transition><transition><source ref="id22"/><target ref="id21"/><label kind="synchronisation" x="-104" y="-8">process_?</label></transition><transition><source ref="id23"/><target ref="id22"/><label kind="synchronisation" x="48" y="-56">from?</label></transition><transition><source ref="id24"/><target ref="id23"/><label kind="synchronisation" x="16" y="-112">to?</label></transition><transition><source ref="id25"/><target ref="id24"/><label kind="synchronisation" x="-40" y="-136">to?</label></transition><transition><source ref="id20"/><target ref="id25"/><label kind="synchronisation" x="-144" y="-136">process_?</label></transition></template><system>// Place template instantiations here.
//		routes = Routes();
agent1 = AgentDef(3,0,1);
routes1 = Routes();
route1 = Route();
template1 = MigrationTemplate();
		// List one or more processes to be composed into a system.
//AgentDef
system route1,routes1,template1,agent1 ;</system></nta>